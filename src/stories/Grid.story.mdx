import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { Grid, GridItem } from '../index';
import { Item, Warning } from './story-blocks';
import { allBoxExcludedProps } from './prop-values.ts';

<Meta title="Components|Grid" component={Grid} />

# Grid

The Grid is a 12 column layout, built using CSS Grid but with fallback to Flexbox. It consists of
the `<Grid>` with a collection of `<GridItem>` elements.

<Preview>
  <Story name="Basic grid">
    <Grid gridGap="24px">
      <GridItem col={12}>
        <Item>col=12</Item>
      </GridItem>
      <GridItem col={6}>
        <Item>col=6</Item>
      </GridItem>
      <GridItem col={6}>
        <Item>col=6</Item>
      </GridItem>
      <GridItem col={3}>
        <Item>col=3</Item>
      </GridItem>
      <GridItem col={3}>
        <Item>col=3</Item>
      </GridItem>
      <GridItem col={3}>
        <Item>col=3</Item>
      </GridItem>
      <GridItem col={3}>
        <Item>col=3</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
      <GridItem col={1}>
        <Item>col=1</Item>
      </GridItem>
    </Grid>
  </Story>
</Preview>

### Responsive grid

Since the `<Grid>` is built using [styled-system](), the `gridGap` and `col` values accept a
responsive value - Like the breakpoints array.

<Preview>
  <Story name="Responsive grid">
    <Grid gridGap={[16, 32]}>
      <GridItem col={[12, 6, 8]}>
        <Item>xs=12, md=6, lg=8</Item>
      </GridItem>
      <GridItem col={[6, 3, 2]}>
        <Item>xs=6, md=3, lg=2</Item>
      </GridItem>
      <GridItem col={[6, 3, 2]}>
        <Item>xs=6, md=3, lg=2</Item>
      </GridItem>
    </Grid>
  </Story>
</Preview>

### Grid columns

By default the grid uses a standard `12` column layout. You can change this if needed - for example
when nesting grids. The typings do limit you to value between `1` and `12`.

<Preview>
  <Story name="Grid columns grid">
    <Grid forceFlexBox gridColumns={10} gridGap="24px">
      <GridItem col={10}>
        <Item>10</Item>
      </GridItem>
      <GridItem col={5}>
        <Item>5</Item>
      </GridItem>
      <GridItem col={5}>
        <Item>5</Item>
      </GridItem>
      <GridItem col={3}>
        <Item>3</Item>
      </GridItem>
      <GridItem col={2}>
        <Item>2</Item>
      </GridItem>
      <GridItem col={2}>
        <Item>2</Item>
      </GridItem>
      <GridItem col={3}>
        <Item>3</Item>
      </GridItem>
    </Grid>
  </Story>
</Preview>

Because we need to support the flexbox fallback method, the responsive handling is simplified a
bit - Only the responsive array is supported.

<Preview>
  <Story name="Responsive Grid columns grid">
    <Grid gridColumns={[8, 10, 12]} gridGap="24px">
      <GridItem col={[8, 10, 12]}>
        <Item>full</Item>
      </GridItem>
      <GridItem col={[4, 5, 6]}>
        <Item>half</Item>
      </GridItem>
      <GridItem col={[4, 5, 6]}>
        <Item>half</Item>
      </GridItem>
    </Grid>
  </Story>
</Preview>

### Nested grid

When nesting Grids, it might make sense to adjust the columns to match the outer Grid. This ensures
you can keep the same grid gap, making it possible to keep the grid aligned with the design.

<Preview>
  <Story name="Nested grids">
    <Grid gridColumns={12} gridGap="24px">
      <GridItem col={12}>
        <strong>12 columns</strong>
        <Grid gridColumns={[8, 10, 12]} gridGap="24px">
          <GridItem col={[8, 10, 12]}>
            <Item>full</Item>
          </GridItem>
          <GridItem col={[4, 5, 6]}>
            <Item>half</Item>
          </GridItem>
          <GridItem col={[4, 5, 6]}>
            <Item>half</Item>
          </GridItem>
        </Grid>
      </GridItem>
      <GridItem col={8}>
        <strong>8 columns</strong>
        <Grid gridColumns={8} gridGap="24px">
          <GridItem col={8}>
            <Item sx={{ bg: 'blue', color: 'white' }}>full</Item>
          </GridItem>
          <GridItem col={4}>
            <Item sx={{ bg: 'blue', color: 'white' }}>half</Item>
          </GridItem>
          <GridItem col={4}>
            <Item sx={{ bg: 'blue', color: 'white' }}>half</Item>
          </GridItem>
        </Grid>
      </GridItem>
      <GridItem col={4}>
        <strong>4 columns</strong>
        <Grid gridColumns={4} gridGap="24px">
          <GridItem col={4}>
            <Item sx={{ bg: 'darkred', color: 'white' }}>full</Item>
          </GridItem>
          <GridItem col={2}>
            <Item sx={{ bg: 'darkred', color: 'white' }}>half</Item>
          </GridItem>
          <GridItem col={2}>
            <Item sx={{ bg: 'darkred', color: 'white' }}>half</Item>
          </GridItem>
        </Grid>
      </GridItem>
    </Grid>
  </Story>
</Preview>

### Force Flexbox Grid

When supported the `<Grid>` is styled using CSS Grid, but you can always disable this, and force the
Flexbox fallback to be used. This is done by setting `forceFlexBox` to `true`. Use this to debug the
Flexbox layout in a modern browser, and ensure you didn't break anything.

#### With Flexbox Grid

<Preview name="Forced Flexbox grid">
  <Grid gridGap="24px" forceFlexBox>
    <GridItem col={12}>
      <Item>col=12</Item>
    </GridItem>
    <GridItem col={6}>
      <Item>col=6</Item>
    </GridItem>
    <GridItem col={6}>
      <Item>col=6</Item>
    </GridItem>
    <GridItem col={3}>
      <Item>col=3</Item>
    </GridItem>
    <GridItem col={3}>
      <Item>col=3</Item>
    </GridItem>
    <GridItem col={3}>
      <Item>col=3</Item>
    </GridItem>
    <GridItem col={3}>
      <Item>col=3</Item>
    </GridItem>
  </Grid>
</Preview>

#### With CSS Grid

<Preview name="Forced CSS grid">
  <Grid gridGap="24px" disableGrid={false}>
    <GridItem col={12}>
      <Item>col=12</Item>
    </GridItem>
    <GridItem col={6}>
      <Item>col=6</Item>
    </GridItem>
    <GridItem col={6}>
      <Item>col=6</Item>
    </GridItem>
    <GridItem col={3}>
      <Item>col=3</Item>
    </GridItem>
    <GridItem col={3}>
      <Item>col=3</Item>
    </GridItem>
    <GridItem col={3}>
      <Item>col=3</Item>
    </GridItem>
    <GridItem col={3}>
      <Item>col=3</Item>
    </GridItem>
  </Grid>
</Preview>

## API

The components inherit the [Box](/?path=/docs/components-box--page#props) props. Below are just the
unique props.

> To provide the Flexbox fallback the `<Grid>` uses a negative `margin`, while the `<GridItem>` uses
> `padding`. Therefor it's important that you don't change these values, since it will break the
> layout in browsers without support for CSS Grid. If you have to change the padding/margin, add it
> to the wrapping element (like `<Container>`) or the inner items.

### Grid

<Props of={Grid} exclude={allBoxExcludedProps} />

The `<Grid>` has the default `variant` value `grids.grid` - you can use it to modify the default
styling. This can be useful to set a `gridGap` globally that matches the design style guide.

```typescript
const theme = {
  grids: {
    grid: {
      gridGap: [15, 20, 30],
    },
  },
};
```

If needed, you can define different types of grid variants in this object - It's recommended to use
`enum` values to keep it typed.

```typescript
export enum GridVariant {
  Default = 'grid',
  Layout = 'layout',
}

const theme = {
  grids: {
    [GridVariant.Default]: {
      gridGap: 0,
    },
    [GridVariant.Layout]: {
      gridGap: [15, 20, 30],
    },
  },
};
```

### GridItem

<Props of={GridItem} exclude={['gridColumns', ...allBoxExcludedProps]} />
